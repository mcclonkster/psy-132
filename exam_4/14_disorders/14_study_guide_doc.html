<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Chapter 14 · Psychological Disorders</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="14_study_guide_files/libs/clipboard/clipboard.min.js"></script>
<script src="14_study_guide_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="14_study_guide_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="14_study_guide_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="14_study_guide_files/libs/quarto-html/popper.min.js"></script>
<script src="14_study_guide_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="14_study_guide_files/libs/quarto-html/anchor.min.js"></script>
<link href="14_study_guide_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="14_study_guide_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="14_study_guide_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="14_study_guide_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="14_study_guide_files/libs/bootstrap/bootstrap-eba68a96035bbb4df607db32d986b3bd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#chapter-14-psychological-disorders-student-summary" id="toc-chapter-14-psychological-disorders-student-summary" class="nav-link active" data-scroll-target="#chapter-14-psychological-disorders-student-summary">Chapter 14: Psychological Disorders – Student Summary</a>
  <ul class="collapse">
  <li><a href="#what-counts-as-abnormal-in-psychology" id="toc-what-counts-as-abnormal-in-psychology" class="nav-link" data-scroll-target="#what-counts-as-abnormal-in-psychology">14.1 What Counts as “Abnormal” in Psychology?</a></li>
  <li><a href="#dsm-5-diagnosis-and-labels" id="toc-dsm-5-diagnosis-and-labels" class="nav-link" data-scroll-target="#dsm-5-diagnosis-and-labels">14.2 DSM-5, Diagnosis, and Labels</a></li>
  <li><a href="#why-disorders-develop-biopsychosocial-and-stressvulnerability-models" id="toc-why-disorders-develop-biopsychosocial-and-stressvulnerability-models" class="nav-link" data-scroll-target="#why-disorders-develop-biopsychosocial-and-stressvulnerability-models">14.3 Why Disorders Develop: Biopsychosocial and Stress–Vulnerability Models</a></li>
  <li><a href="#major-categories-of-psychological-disorders" id="toc-major-categories-of-psychological-disorders" class="nav-link" data-scroll-target="#major-categories-of-psychological-disorders">14.4 Major Categories of Psychological Disorders</a>
  <ul class="collapse">
  <li><a href="#psychotic-disorders" id="toc-psychotic-disorders" class="nav-link" data-scroll-target="#psychotic-disorders">Psychotic Disorders</a></li>
  <li><a href="#mood-disorders" id="toc-mood-disorders" class="nav-link" data-scroll-target="#mood-disorders">Mood Disorders</a></li>
  <li><a href="#personality-disorders-with-antisocial-as-an-example" id="toc-personality-disorders-with-antisocial-as-an-example" class="nav-link" data-scroll-target="#personality-disorders-with-antisocial-as-an-example">Personality Disorders (with Antisocial as an Example)</a></li>
  <li><a href="#anxiety-trauma-related-dissociative-and-somatic-symptom-disorders" id="toc-anxiety-trauma-related-dissociative-and-somatic-symptom-disorders" class="nav-link" data-scroll-target="#anxiety-trauma-related-dissociative-and-somatic-symptom-disorders">Anxiety, Trauma-Related, Dissociative, and Somatic Symptom Disorders</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="14_study_guide_slides.html"><i class="bi bi-file-slides"></i>RevealJS</a></li><li><a href="14_study_guide.pptx"><i class="bi bi-file-slides"></i>Powerpoint</a></li><li><a href="../../../../../../14_study_guide.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li><li><a href="14_study_guide.docx"><i class="bi bi-file-word"></i>MS Word</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Chapter 14 · Psychological Disorders</h1>
<p class="subtitle lead">Student Handout – Summary · Learning Targets · Practice</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="chapter-14-psychological-disorders-student-summary" class="level1">
<h1>Chapter 14: Psychological Disorders – Student Summary</h1>
<p>Psychological disorders affect school, work, relationships, and health for many people. This chapter explains <strong>what counts as a psychological disorder</strong>, <strong>how disorders are classified and diagnosed</strong>, <strong>why they develop</strong>, and <strong>how we can think about them with accuracy and compassion</strong>. It also surveys major categories such as psychotic, mood, personality, anxiety, trauma-related, dissociative, and somatic symptom disorders, and ends by highlighting <strong>perseverance (grit)</strong> as a strength that supports coping and recovery.</p>
<section id="what-counts-as-abnormal-in-psychology" class="level2">
<h2 class="anchored" data-anchor-id="what-counts-as-abnormal-in-psychology">14.1 What Counts as “Abnormal” in Psychology?</h2>
<p>Everyday language often uses words like “crazy” or “weird” in loose, unhelpful ways. Clinical psychology uses <strong>clear criteria and multiple lenses</strong> instead of quick judgments.</p>
<p><strong>Psychopathology</strong> is the scientific study of mental, emotional, and behavioral disorders. A <strong>psychological disorder</strong> is a <strong>pattern of thoughts, feelings, or behaviors</strong> that causes serious <strong>distress</strong> and/or <strong>interference in daily life</strong>. Not every bad week or strong emotion qualifies as a disorder. We pay attention to <strong>how intense</strong>, <strong>how long</strong>, and <strong>how much it interferes</strong> with work, school, relationships, and self-care.</p>
<p>Psychologists use several <strong>lenses (clues)</strong> together:</p>
<ul>
<li><strong>Statistical unusualness</strong>: How far is the pattern from what is typical for this culture and age group? Being rare is a possible clue, but “rare” alone does not mean disordered.</li>
<li><strong>Subjective discomfort</strong>: How much <strong>emotional pain</strong>, fear, or feeling “out of control” is present? Distress often drives help-seeking, but it can be <strong>missing</strong> in some conditions (for example, mania) and <strong>present</strong> in normal experiences (for example, grief).</li>
<li><strong>Social nonconformity</strong>: Does behavior strongly violate important social norms? Some norm-breaking is creative, healthy, or culturally appropriate, so context matters.</li>
<li><strong>Maladaptiveness (core lens)</strong>: Does the pattern seriously <strong>interfere with living</strong>—work, school, relationships, health, safety, or basic self-care? Mild, situational reactions can be adaptive; impairing patterns are maladaptive.</li>
</ul>
<p>There is <strong>no single “abnormal test.”</strong> Psychologists consider <strong>rarity, distress, norm-breaking, and impairment together</strong>, always asking: “In what situation? In what culture? What impact on life?”</p>
</section>
<section id="dsm-5-diagnosis-and-labels" class="level2">
<h2 class="anchored" data-anchor-id="dsm-5-diagnosis-and-labels">14.2 DSM-5, Diagnosis, and Labels</h2>
<p>Professionals need a <strong>shared map</strong> for describing patterns of problems. The <strong>DSM–5</strong> (Diagnostic and Statistical Manual of Mental Disorders, Fifth Edition) is a catalog of recognized mental disorders. It:</p>
<ul>
<li>Lists mental disorders and their <strong>diagnostic criteria</strong>.</li>
<li>Specifies <strong>required symptoms</strong>, how many must be present, how long they must last, and the level of <strong>impairment</strong> required.</li>
<li>Is updated as <strong>research</strong> and <strong>social norms</strong> change.</li>
</ul>
<p>A <strong>diagnosis</strong> helps clinicians:</p>
<ul>
<li>Communicate clearly about cases.</li>
<li>Plan and coordinate <strong>treatment</strong> and services.</li>
<li>Conduct <strong>research</strong> on outcomes.</li>
<li>Work with systems such as <strong>insurance</strong> and schools.</li>
</ul>
<p>At the same time:</p>
<ul>
<li>Many people have <strong>comorbidity</strong>, meaning <strong>two or more diagnoses</strong> at once (for example, depression plus anxiety).</li>
<li>Real people rarely fit perfectly into a single category; the DSM is a <strong>map, not the territory</strong>. It is useful, but never captures a whole human life.</li>
</ul>
<p><strong>Labels can help</strong> when they:</p>
<ul>
<li>Provide a shared name for an experience.</li>
<li>Improve access to care and resources.</li>
<li>Help people find accurate information and peer support.</li>
</ul>
<p><strong>Labels can harm</strong> when they:</p>
<ul>
<li>Become stereotypes that reduce people to “their diagnosis.”</li>
<li>Increase stigma, fear, or social exclusion.</li>
<li>Discourage help-seeking because people do not want to be labeled.</li>
</ul>
<p>A healthy approach is to treat diagnosis as a <strong>clinical tool</strong>, not a core identity, and to use <strong>person-first language</strong> such as “a person living with OCD” rather than “an OCD patient.”</p>
<p>In legal contexts, <strong>“insanity”</strong> is a <strong>legal term</strong>, not a DSM diagnosis. Courts focus on whether a person understood their actions and their wrongfulness at the time of a crime. Having a mental disorder does <strong>not</strong> automatically remove legal responsibility, and having no diagnosis does <strong>not</strong> automatically mean full responsibility. Clinical and legal standards differ.</p>
</section>
<section id="why-disorders-develop-biopsychosocial-and-stressvulnerability-models" class="level2">
<h2 class="anchored" data-anchor-id="why-disorders-develop-biopsychosocial-and-stressvulnerability-models">14.3 Why Disorders Develop: Biopsychosocial and Stress–Vulnerability Models</h2>
<p>Most psychological disorders do <strong>not</strong> have a single cause. The <strong>biopsychosocial model</strong> says that problems arise from interacting:</p>
<ul>
<li><strong>Biological factors</strong> (genes, brain chemistry, brain structure, nervous system sensitivity).</li>
<li><strong>Psychological factors</strong> (thought patterns, coping skills, temperament).</li>
<li><strong>Social and cultural factors</strong> (relationships, stress, culture, discrimination, resources).</li>
</ul>
<p>The <strong>stress–vulnerability (diathesis–stress) model</strong> says that:</p>
<ul>
<li>People differ in their <strong>underlying vulnerability (diathesis)</strong> due to genetics, biology, temperament, and early experiences (such as trauma, neglect, or chronic instability).</li>
<li>Life brings different levels of <strong>stress</strong> (loss, conflict, violence, unsafe environments, poverty, discrimination, sudden changes, and long-term pressure).</li>
<li>Disorders often appear when <strong>vulnerability and stress combine</strong>.</li>
</ul>
<p>A person with <strong>high vulnerability</strong> may develop symptoms under mild stress, while someone with <strong>low vulnerability</strong> may handle intense stress without developing a disorder. Most people fall somewhere in the middle. This model guides <strong>prevention and treatment</strong>: lowering stress, building coping skills, and increasing support can reduce risk even when vulnerability is present.</p>
</section>
<section id="major-categories-of-psychological-disorders" class="level2">
<h2 class="anchored" data-anchor-id="major-categories-of-psychological-disorders">14.4 Major Categories of Psychological Disorders</h2>
<p>We organize disorders into broad <strong>categories</strong> with typical patterns of thoughts, feelings, and behaviors. The focus is on <strong>main patterns and impact</strong>, not memorizing full diagnostic criteria.</p>
<section id="psychotic-disorders" class="level3">
<h3 class="anchored" data-anchor-id="psychotic-disorders">Psychotic Disorders</h3>
<p><strong>Psychosis</strong> involves a major <strong>loss of contact with shared reality</strong>. Core features include:</p>
<ul>
<li><strong>Hallucinations</strong> (sensory experiences without an external source, such as hearing voices).</li>
<li><strong>Delusions</strong> (strongly held false beliefs, such as being plotted against without evidence).</li>
<li>Disorganized <strong>thinking, speech, or behavior</strong>.</li>
</ul>
<p>In <strong>delusional disorder</strong>, a person has one or more persistent delusions for at least a month, with relatively intact functioning outside the delusional topic. Common themes include erotomanic, grandiose, jealous, and persecutory delusions.</p>
<p><strong>Schizophrenia</strong> is a long-term psychotic disorder that affects thought, perception, emotion, and behavior. Symptoms often start in <strong>late adolescence or early adulthood</strong> and include:</p>
<ul>
<li><strong>Positive symptoms</strong> (added experiences): hallucinations, delusions, disorganized speech or behavior.</li>
<li><strong>Negative symptoms</strong> (reduced abilities): flat affect, low motivation, social withdrawal.</li>
</ul>
<p>Risk factors include genetic vulnerability, brain differences, and early biological and psychosocial stressors. Stressful life events and family environments high in criticism or hostility can trigger episodes in vulnerable people. Treatment combines <strong>antipsychotic medications</strong> with <strong>therapy, skills training, family education, and case management</strong>; the focus is often on long-term management and quality of life.</p>
</section>
<section id="mood-disorders" class="level3">
<h3 class="anchored" data-anchor-id="mood-disorders">Mood Disorders</h3>
<p><strong>Mood disorders</strong> involve major disturbances in <strong>emotional state</strong> over time.</p>
<ul>
<li><strong>Major depressive disorder</strong>: at least two weeks of nearly constant <strong>low mood or loss of interest</strong>, plus symptoms such as sleep and appetite changes, fatigue, concentration problems, and thoughts of worthlessness, guilt, or death.</li>
<li><strong>Persistent depressive disorder</strong>: chronic, less intense but long-lasting depression, often experienced as “just how I am.”</li>
<li><strong>Bipolar and related disorders</strong>: patterns of shifting between <strong>depression</strong> and <strong>mania or hypomania</strong>.
<ul>
<li><strong>Mania</strong>: very elevated or irritable mood, high energy, little sleep, impulsive or risky behavior.</li>
<li><strong>Hypomania</strong>: milder version that is noticeable but less impairing.</li>
<li><strong>Bipolar I</strong>: at least one full manic episode (often with depression).</li>
<li><strong>Bipolar II</strong>: hypomanic episodes plus major depressive episodes, but no full mania.</li>
<li><strong>Cyclothymic disorder</strong>: milder, longer-lasting ups and downs.</li>
</ul></li>
</ul>
<p>Mood disorders are strongly linked to <strong>suicide risk</strong>. Risk is also elevated in substance use and some personality disorders. Important risk factors include past attempts, current suicidal thoughts, severe hopelessness, substance misuse, recent major losses, access to lethal means, and low support.</p>
<p>Responding to suicide warning signs means:</p>
<ul>
<li>Taking <strong>any mention of wanting to die</strong> seriously.</li>
<li>Listening, staying present, and reducing immediate danger where possible.</li>
<li>Helping connect the person to <strong>professional help and crisis resources</strong>.</li>
</ul>
</section>
<section id="personality-disorders-with-antisocial-as-an-example" class="level3">
<h3 class="anchored" data-anchor-id="personality-disorders-with-antisocial-as-an-example">Personality Disorders (with Antisocial as an Example)</h3>
<p><strong>Personality disorders</strong> are long-standing, inflexible patterns of inner experience and behavior that:</p>
<ul>
<li>Deviate from cultural expectations.</li>
<li>Show up across many situations.</li>
<li>Cause significant distress or impairment.</li>
</ul>
<p><strong>Antisocial personality disorder</strong> involves a pattern of <strong>violating others’ rights</strong>, ignoring norms, and engaging in behaviors such as lying, stealing, manipulating, and rule-breaking without remorse.</p>
<p><strong>Psychopathy</strong> overlaps with antisocial behavior and adds features such as superficial charm, shallow emotion, lack of empathy, and lack of guilt.</p>
<p>Origins of these patterns involve a mix of <strong>vulnerability and environment</strong>, not a simple “bad person” story. Risk factors include temperamental traits (fearlessness, impulsivity, sensation-seeking) and early experiences (harsh, inconsistent, or abusive parenting, chaotic environments). Explanation does <strong>not</strong> equal excuse; it points to <strong>prevention and early intervention</strong> targets.</p>
</section>
<section id="anxiety-trauma-related-dissociative-and-somatic-symptom-disorders" class="level3">
<h3 class="anchored" data-anchor-id="anxiety-trauma-related-dissociative-and-somatic-symptom-disorders">Anxiety, Trauma-Related, Dissociative, and Somatic Symptom Disorders</h3>
<p><strong>Anxiety disorders</strong> feature excessive, persistent, hard-to-control anxiety that interferes with daily life. Normal anxiety is brief and tied to clear stressors; disordered anxiety is <strong>out of proportion</strong>, lasts <strong>months</strong>, and <strong>disrupts functioning</strong>.</p>
<p>Examples include:</p>
<ul>
<li><strong>Generalized anxiety disorder (GAD)</strong>: chronic, widespread, hard-to-control worry about many areas, with physical symptoms such as muscle tension, restlessness, fatigue, and sleep problems.</li>
<li><strong>Panic disorder</strong>: recurrent, unexpected panic attacks (sudden intense fear with physical symptoms like heart pounding, shortness of breath, dizziness, feelings of unreality) plus fear of future attacks.</li>
<li><strong>Agoraphobia</strong>: fear and avoidance of situations where escape or help might feel difficult, which can greatly restrict daily life.</li>
<li><strong>Specific phobias</strong>: intense, irrational fear of particular objects or situations (for example, spiders, heights, flying).</li>
<li><strong>Social anxiety disorder</strong>: strong fear of being judged, criticized, or humiliated, often leading to avoidance of speaking or performing in front of others.</li>
</ul>
<p>Anxiety disorders can develop through <strong>conditioning and learning</strong>, <strong>cognitive patterns</strong> (overestimating danger and underestimating coping ability), and <strong>biological factors</strong> such as temperament, genes, and sensitive fear circuitry.</p>
<p><strong>Obsessive–compulsive disorder (OCD)</strong> involves:</p>
<ul>
<li><strong>Obsessions</strong>: intrusive, unwanted thoughts, images, or urges that create anxiety.</li>
<li><strong>Compulsions</strong>: repetitive behaviors or mental rituals done to reduce anxiety (for example, washing, checking, counting). Relief is temporary, and rituals can take over large parts of the day.</li>
</ul>
<p><strong>Hoarding disorder</strong> involves persistent difficulty discardi</p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>